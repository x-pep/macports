# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-
#     vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           python 1.0

name                pep-adapter-enigmail
version             1.0.101
categories          mail
platforms           darwin
license             GPL-2+
maintainers         x-pep cluck
description         pEp Engine for pEp JSON Mini Adapter for Enigmail
long_description    pEp Engine for pEp JSON Mini Adapter for Enigmail
homepage            https://pep.software/

master_sites        https://pep.foundation/dev/repos/pEpJSONServerAdapter/archive

distfiles           69eccc3967269745297c13706b8d946f1c4df5b7.tar.gz

checksums           rmd160 5c125443970f26c75e4bb51196f165693e981d9a \
                    sha256 2cf94ca3e661d9ee4479ef26bfaf6555870a7b211859e6746091fe78bbec6573

extract.suffix      .tar.gz
extract.post_args   | tar --strip-components 1 -xf -
worksrcdir          .

depends_build       port:boost \
                    port:libevent \
                    port:libpep-engine-enigmail \
                    port:gtest

depends_lib         port:libpep-engine-enigmail

use_configure       no

build.type          default
build.cmd           make -C server
build.target        all
build.args          PREFIX=${prefix} \
                         \"HTML_DIRECTORY=${prefix}/share/pEp/html\" \
                         \"GTEST_DIR=${prefix}/src/googletest\" \
                         \"GTEST_INC=${prefix}/src/googletest/include\" \
                         \"ENGINE_LIB=-L${prefix}/lib\" \"ENGINE_INC=-I${prefix}/include\" \
                         \"EVENT_LIB=-L${prefix}/lib\" \"EVENT_INC=-I${prefix}/include\" \
                         \"LDFLAGS=-Wl,-rpath,${prefix}/lib\"

destroot.cmd        make -C server
destroot.target     install
destroot.pre_args   ${destroot.target}
destroot.args       PREFIX=${destroot}${prefix} \
                         \"HTML_DIRECTORY=${destroot}${prefix}/share/pEp/html\" \
                         \"GTEST_DIR=${prefix}/src/googletest\" \
                         \"GTEST_INC=${prefix}/src/googletest/include\" \
                         \"ENGINE_LIB=-L${prefix}/lib\" \"ENGINE_INC=-I${prefix}/include\" \
                         \"EVENT_LIB=-L${prefix}/lib\" \"EVENT_INC=-I${prefix}/include\"

destroot.post_args  ""
