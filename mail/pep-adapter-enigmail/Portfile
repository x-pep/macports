# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-
#     vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           python 1.0

name                pep-adapter-enigmail
version             1.0.102
categories          mail
platforms           darwin
license             GPL-2+
maintainers         x-pep cluck
description         pEp Engine for pEp JSON Mini Adapter for Enigmail
long_description    pEp Engine for pEp JSON Mini Adapter for Enigmail
homepage            https://pep.software/

master_sites        https://pep.foundation/dev/repos/pEpJSONServerAdapter/archive

distfiles           e10d96f5dcc8.tar.bz2

checksums           rmd160 32eb0a67136c34b85d1d287470fd85f562b2cbae \
                    sha256 59adbba732f1a6bee22a9ce9c744327cdec7f1db194ea08f7b4c8e9b4bd74c47

extract.suffix      .tar.gz
extract.post_args   | tar --strip-components 1 -xf -
worksrcdir          .

depends_build       port:boost \
                    port:libevent \
                    port:libpep-engine-enigmail \
                    port:gtest

depends_lib         port:libpep-engine-enigmail

use_configure       no

build.type          default
build.cmd           make -C server
build.target        all
build.args          PREFIX=${prefix} \
                         \"HTML_DIRECTORY=${prefix}/share/pEp/html\" \
                         \"GTEST_DIR=${prefix}/src/googletest\" \
                         \"GTEST_INC=${prefix}/src/googletest/include\" \
                         \"ENGINE_LIB=-L${prefix}/lib\" \"ENGINE_INC=-I${prefix}/include\" \
                         \"EVENT_LIB=-L${prefix}/lib\" \"EVENT_INC=-I${prefix}/include\" \
                         \"LDFLAGS=-Wl,-rpath,${prefix}/lib\"

destroot.cmd        make -C server
destroot.target     install
destroot.pre_args   ${destroot.target}
destroot.args       PREFIX=${destroot}${prefix} \
                         \"HTML_DIRECTORY=${destroot}${prefix}/share/pEp/html\" \
                         \"GTEST_DIR=${prefix}/src/googletest\" \
                         \"GTEST_INC=${prefix}/src/googletest/include\" \
                         \"ENGINE_LIB=-L${prefix}/lib\" \"ENGINE_INC=-I${prefix}/include\" \
                         \"EVENT_LIB=-L${prefix}/lib\" \"EVENT_INC=-I${prefix}/include\"

destroot.post_args  ""
